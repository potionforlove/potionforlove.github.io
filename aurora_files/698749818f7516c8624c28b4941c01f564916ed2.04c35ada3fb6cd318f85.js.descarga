(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[38],{"5S1k":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var n=a("1OyB"),r=a("vuIU"),i=function(){function e(t){var a=this,r=t.phaser,i=t.offsetBottom,s=t.bgSpeed;Object(n.a)(this,e),this.phaser=r,this.bgSpeed=s,this.Backgrounds=[this.phaser.add.tileSprite(this.phaser.cameras.main.midPoint.x,this.phaser.cameras.main.midPoint.y,this.phaser.cameras.main.width,this.phaser.cameras.main.height,"background-far-0").setOrigin(.5).setDepth(-3),this.phaser.add.tileSprite(this.phaser.cameras.main.midPoint.x,this.phaser.cameras.main.midPoint.y,this.phaser.cameras.main.width,this.phaser.cameras.main.height,"background-mid-0").setOrigin(.5).setDepth(-2),this.phaser.add.tileSprite(this.phaser.cameras.main.midPoint.x,this.phaser.cameras.main.midPoint.y,this.phaser.cameras.main.width,this.phaser.cameras.main.height,"background-near-0").setOrigin(.5).setDepth(-1)],this.Backgrounds.forEach((function(e){e.setTileScale(a.phaser.cameras.main.height/400)})),this.ground=this.phaser.add.tileSprite(this.phaser.cameras.main.midPoint.x,this.phaser.cameras.main.height-i,this.phaser.cameras.main.width,50,"ground-0").setOrigin(.5,1).setDepth(0),this.ground.setTileScale(2),this.phaser.physics.add.existing(this.ground,!0)}return Object(r.a)(e,[{key:"chooseLevel",value:function(e){this.Backgrounds.forEach((function(t,a){t.setTexture(["background-far","background-mid","background-near"][a]+"-"+e)})),this.ground.setTexture("ground-"+e)}},{key:"update",value:function(e){var t=this;this.Backgrounds.forEach((function(a,n){a.tilePositionX+=Math.floor(e*[t.bgSpeed&&t.bgSpeed.far?t.bgSpeed.far:.2,t.bgSpeed&&t.bgSpeed.mid?t.bgSpeed.mid:.4,t.bgSpeed&&t.bgSpeed.close?t.bgSpeed.close:.6][n])})),this.ground.tilePositionX+=e}},{key:"playerStartPos",get:function(){return{x:50,y:this.ground.y-50}}},{key:"groundBlockWidth",get:function(){return 50}},{key:"groundY",get:function(){return this.ground.y-50}}]),e}()},DLSN:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var n=a("1OyB"),r=a("vuIU"),i=function(){function e(t){var a=this,r=t.phaser,i=t.playerMaxLives,s=t.gameOverCallback,o=t.campaignID,c=t.trophies;Object(n.a)(this,e),this.phaser=r,this.gameOverCallback=s,this.currentLifeCounter=i,this.playerMaxLives=i,this.lives=[],this.drawHearts(),window.GlitchGame.saveScore=function(){a.saveScore()},this.score=0,this.campaignID=o,this.sessionPoints=0;try{this.sessionPoints=parseInt(localStorage.getItem(this.campaignID+"-lifetimeScore")||0)}catch(l){console.log(l)}this.addBonusPointsToScore(),this.scoreText=this.phaser.add.text(12,14,"SCORE: ".concat(this.score),{fontSize:"14px",fontFamily:'"Pixel", monospace',fill:"#ffffff",lineSpacing:5}),c&&(this.trophies=c.filter((function(e){return e.score>a.sessionPoints+a.score}))),this.setUpTrophyTexts()}return Object(r.a)(e,[{key:"setUpTrophyTexts",value:function(){this.trophyText=this.phaser.add.text(this.phaser.cameras.main.midPoint.x,35,"new song unlocked",{fontSize:"16px",fontFamily:'"Pixel", monospace',fill:"#ffffff",lineSpacing:5,align:"center"}).setOrigin(.5,0).setAlpha(0),this.trophyTweenTimeline=this.phaser.tweens.createTimeline(),this.trophyTweenTimeline.add({targets:this.trophyText,paused:!0,alpha:{from:0,to:1},scale:{from:.7,to:1.1},ease:"Linear",repeat:0,loop:!1,yoyo:!1,duration:800}),this.trophyTweenTimeline.add({targets:this.trophyText,paused:!0,alpha:{from:1,to:0},ease:"Linear",repeat:0,loop:!1,yoyo:!1,delay:3e3,duration:300})}},{key:"triggerTrophyText",value:function(e){var t=this,a=e.alert;this.trophyText.setText(a),this.trophyTweenTimeline.play(),setTimeout((function(){t.setUpTrophyTexts()}),4100)}},{key:"addBonusPointsToScore",value:function(){var e=0;try{e=window.localStorage.getItem(this.campaignID+"-bonusPoints")}catch(t){console.log(t)}e&&(this.score+=parseInt(e)||0)}},{key:"increaseScore",value:function(e){var t=this;if(this.score+=e,this.scoreText.setText("SCORE: ".concat(this.score)),this.trophies){var a=this.trophies.find((function(e){return e.score<=t.sessionPoints+t.score}));a&&(this.trophies=this.trophies.filter((function(e){return e.score>t.sessionPoints+t.score})),this.saveScore(),this.triggerTrophyText(a))}}},{key:"drawHearts",value:function(){for(var e=this.playerMaxLives;e>0;e--)this.lives.push(this.phaser.add.image(this.phaser.cameras.main.width-35*e,25,"heart").setDisplaySize(26,26).setDepth(2))}},{key:"reset",value:function(){try{this.sessionPoints=parseInt(localStorage.getItem(this.campaignID+"-lifetimeScore")||0)}catch(e){console.log(e)}this.score=0,this.addBonusPointsToScore(),this.scoreText.setText("SCORE: ".concat(this.score)),this.lives.forEach((function(e){return e.destroy()})),this.lives=[],this.drawHearts()}},{key:"saveScore",value:function(){try{localStorage.setItem(this.campaignID+"-lifetimeScore",this.sessionPoints+this.score)}catch(e){console.log(e)}}},{key:"loseLife",value:function(){this.lives.shift().destroy(),this.lives.length||(this.saveScore(),this.gameOverCallback())}}]),e}()},KeVN:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var n=a("1OyB"),r=a("vuIU"),i=a("ReuC"),s=a("Ji7U"),o=a("md7G"),c=a("foSv");function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var u=function(e){Object(s.a)(a,e);var t=l(a);function a(e){var r=e.phaser,i=e.groundY,s=e.displayWidth,o=e.gameConfig;return Object(n.a)(this,a),t.call(this,{phaser:r,groundY:i,displayWidth:s,spriteName:"groundObstacle",collisionBox:o.groundEnemyCollisionBox||{}})}return Object(r.a)(a,[{key:"spawnEnemy",value:function(e){Math.random()>.5&&Object(i.a)(Object(c.a)(a.prototype),"spawnEnemy",this).call(this,e)}}]),a}(a("s6iT").a)},OE4k:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var n=a("1OyB"),r=a("vuIU"),i=a("Ji7U"),s=a("md7G"),o=a("foSv");function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var l=function(e){Object(i.a)(a,e);var t=c(a);function a(e){var r=e.phaser,i=e.groundY,s=e.displayWidth,o=e.gameConfig;return Object(n.a)(this,a),t.call(this,{phaser:r,groundY:i,displayWidth:s,spriteName:"flyingObstacle",collisionBox:o.flyingEnemyCollisionBox||{}})}return Object(r.a)(a,[{key:"spawnEnemy",value:function(e,t){this.Enemies.children.entries.length<2&&this.Enemies.create(e,t,this.spriteName)}}]),a}(a("s6iT").a)},ReuC:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("foSv");function r(e,t,a){return(r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(n.a)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(a):i.value}})(e,t,a||e)}},UgJc:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var n=a("1OyB"),r=a("vuIU"),i=function(){function e(t){var a=t.phaser,r=t.startPos,i=t.maxJump,s=t.displayWidth,o=t.afterDeathCallback,c=t.longJumpTime,l=t.characterQuantity;Object(n.a)(this,e),this.phaser=a,this.maxJump=i,this.jumpCounter=0,this.afterDeathCallback=o,this.Player=this.phaser.physics.add.sprite(r.x,r.y-100,"character-idle-0").setOrigin(.5,0).setDepth(5);var u=s/this.Player.displayWidth;this.Player.setScale(u),this.Player.body.setSize(8,18,!0),this.p=this.phaser.add.particles("character-idle-0"),this.createAnims(l),this.Player.anims.play("character-idle-0",!0),this.createJumpInputs(),this.longJumpTime=1e3*c,this.activeCharacter=0,this.elapsedDuration=0}return Object(r.a)(e,[{key:"kill",value:function(){this.dead||(this.dead=!0,this.Player.anims.play("character-die-"+this.activeCharacter,!1))}},{key:"handleJump",value:function(e){this.jumpCounter<this.maxJump&&(this.Player.body.onFloor()?this.Player.setVelocityY(-700):e-this.elapsedDuration>this.longJumpTime&&(this.Player.setVelocityY(this.Player.body.velocity.y-300),this.jumpCounter++),this.Player.anims.play("character-jump-"+this.activeCharacter,!1))}},{key:"createJumpInputs",value:function(){this.jumpKeys=this.phaser.input.keyboard.addKeys("W,w,space",!0,!1)}},{key:"createAnims",value:function(e){for(var t=this,a=0;a<e;a++)this.phaser.anims.create({key:"character-idle-"+a,frames:this.phaser.anims.generateFrameNumbers("character-idle-"+a),frameRate:5,repeat:-1}),this.phaser.anims.create({key:"character-jump-"+a,frames:this.phaser.anims.generateFrameNumbers("character-jump-"+a),frameRate:5,repeat:0}),this.phaser.anims.create({key:"character-run-"+a,frames:this.phaser.anims.generateFrameNumbers("character-run-"+a),frameRate:10,repeat:-1}),this.phaser.anims.create({key:"character-die-"+a,frames:this.phaser.anims.generateFrameNumbers("character-die-"+a),frameRate:5,repeat:0});this.Player.on("animationcomplete",(function(e){e.key.startsWith("character-die")&&(t.afterDeathCallback(),t.dead=!1)}))}},{key:"speedUp",value:function(e){}},{key:"changeCharacter",value:function(e){this.activeCharacter=e,this.p.setTexture("character-idle-"+e)}},{key:"update",value:function(e){if(e){if(this.pointer=this.phaser.input.activePointer,Object.values(this.jumpKeys).some((function(e){return e.isDown}))){var t=Object.values(this.jumpKeys).find((function(e){return e.isDown})).getDuration();this.Player.body.onFloor()&&(this.elapsedDuration=t),this.handleJump(t)}if(this.pointer.isDown){var a=this.pointer.getDuration();this.Player.body.onFloor()&&(this.elapsedDuration=a),this.handleJump(a)}this.Player.body.onFloor()&&(this.jumpCounter=0,this.Player.anims.play("character-run-"+this.activeCharacter,!0))}else!this.dead&&this.Player.anims.play("character-idle-"+this.activeCharacter,!0)}}]),e}()},VTO6:function(e,t,a){e.exports={container:"Leaderboard_container__2tZQM",leaderboard:"Leaderboard_leaderboard__3V4oA",leaderboardTitle:"Leaderboard_leaderboardTitle__32htv",nameColumnTitle:"Leaderboard_nameColumnTitle__3Wz1X",scoreColumnTitle:"Leaderboard_scoreColumnTitle__10wK7",closeLeaderboard:"Leaderboard_closeLeaderboard__1JoDn"}},"aO+K":function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a("q1tI"),r=a.n(n),i=a("TZfF"),s=a("o0o1"),o=a.n(s),c=a("HaE+"),l=a("cIO+"),u=a("4OvO"),h=a.n(u),p=a("m+qX"),d=a.n(p),f=r.a.createElement;function m(e){var t=e.startCountdown,a=e.timerOn,r=e.gameInfo,i=e.setUserConnected,s=e.userConnected,u=e.GA,p=e.gameUIStyle;p||(p={});var m=Object(n.useState)(!1),y=m[0],g=m[1],b=Object(l.a)(),v=b.spotifyUser,S=b.spotifyLoginButton,O=b.spotifyFunctions,k=r.backgroundMusic.spotify,w=k.uri,C=k.type;function x(){return I.apply(this,arguments)}function I(){return(I=Object(c.default)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("track"!==C){e.next=6;break}return e.next=3,O.playMusic({uris:[w]});case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,O.playMusic({context_uri:[w]});case 8:a=e.sent;case 9:"NO_ACTIVE_DEVICE"===a?g(!0):(u("Streaming from Spotify"),t(),y&&g(!1));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){v.connected&&(u("Connected with Spotify"),x(),i(!0))}),[v.connected]),!v.connected&&s?null:v.connected?f("div",{className:d.a.playerContainer},f("span",null,y&&f("span",null,f("p",null,"Oops, looks like your app isn't active. Click"," ",f("a",{href:w,target:"_blank"},"here")," ","to open and start streaming to activate."),f("button",{className:h.a.button+" "+p.button,onClick:x},"Check Again")),!y&&!a&&f("span",{className:h.a.button+" "+p.button,onClick:x},"Click to stream"))):S({style:h.a,customStyle:p})}var y=a("/x/B"),g=a("vHXl"),b=r.a.createElement;function v(e){var t=e.startCountdown,a=e.setTimerOn,r=e.timerOn,i=e.setUserConnected,s=e.userConnected,l=e.gameInfo,u=e.GA,p=e.gameUIStyle,f=Object(y.a)(),m=f.appleUser,v=f.playApple,S=f.authorizeApple,O=f.stopApplePlayback;p||(p={});var k=Object(n.useState)(!1),w=k[0],C=k[1],x=l.backgroundMusic.apple;function I(){return j.apply(this,arguments)}function j(){return(j=Object(c.default)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,O();case 4:return e.next=6,v(x);case 6:t(),u("Streaming from Apple"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){m.connected&&(I(),u("Connected with Apple"),i(!0))}),[m.connected]),!m.connected&&s?null:m.connected?b("div",{className:d.a.playerContainer},!r&&b("button",{className:h.a.button+" "+p.button,onClick:I},"Stream")):b("button",{className:h.a.loginWithApple+" "+p.loginWithApple,onClick:Object(c.default)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w||(C(!0),S());case 1:case"end":return e.stop()}}),e)})))},w?b(g.a,null):b(n.Fragment,null,b("img",{className:h.a.appleIcon,src:"/icons/music/applemusic.svg"}),b("span",null,"Login with Apple Music")))}var S=r.a.createElement;function O(e){var t=e.gameInfo,a=e.gameUIStyle,r=Object(n.useState)(!1),s=r[0],o=r[1],c=Object(n.useState)(0),l=c[0],u=c[1],h=Object(n.useState)(30),p=h[0],f=h[1],y=Object(n.useState)(!1),g=y[0],b=y[1],O=t.campaignID+"-bonusPoints";function k(e){Object(i.b)(t.campaignID,e)}Object(n.useEffect)((function(){var e=window.localStorage.getItem(O);e&&u(parseInt(e))}),[]),Object(n.useEffect)((function(){0===p&&function(){clearInterval(w.current),w.current=null,f(30),b(!1);var e=window.localStorage.getItem(O);e||(e=0);var t=parseInt(e)+250;window.localStorage.setItem(O,t),u(t)}()}),[p]);var w=Object(n.useRef)(null);function C(){b(!0),w.current=setInterval((function(){f((function(e){return e-1}))}),1e3)}return S("div",{className:d.a.container},S("p",null,t.streamForBonusPointsCopy||"Get bonus points for every stream!"),S("p",null,"Total Bonus: ",l),g&&S("p",null,"Points awarded in ",p," seconds"),S(m,{startCountdown:C,setTimerOn:b,timerOn:g,gameInfo:t,userConnected:s,setUserConnected:o,GA:k,gameUIStyle:a}),S(v,{startCountdown:C,setTimerOn:b,timerOn:g,gameInfo:t,userConnected:s,setUserConnected:o,GA:k,gameUIStyle:a}))}},bp8q:function(e,t,a){"use strict";a.d(t,"a",(function(){return B}));var n=a("o0o1"),r=a.n(n),i=a("HaE+"),s=a("q1tI"),o=a.n(s),c=a("wHH0"),l=a("/x/B"),u=a("cIO+"),h=a("TZfF"),p=a("g37X"),d=a.n(p),f=a("4OvO"),m=a.n(f),y=a("HlzF"),g=a("uVh7"),b=a("BxjU"),v=a("p3dW"),S=a("o3IZ"),O=a("S6y8"),k=a("CbCG"),w=a("h1Ed"),C=a("tV8m"),x=a("vHXl"),I=a("VTO6"),j=a.n(I),P=o.a.createElement;function T(e){var t=e.changeScreen,a=e.gameInfo,n=e.gameUIStyle,o=Object(s.useState)([]),l=o[0],u=o[1],h=Object(s.useState)(!0),p=h[0],d=h[1];function f(){return(f=Object(i.default)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=C.c.collection("games").doc("publicHighscores").collection(a.campaignID),e.next=4,n.orderBy("highScore","desc").limit(a.leaderboardLimit||10).get();case 4:e.sent.forEach((function(e){t.push(e.data())})),u(t),d(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),P("div",{className:j.a.container+" "+n.leaderboardContainer},P("div",{className:j.a.closeLeaderboard+" "+n.closeLeaderboard,onClick:function(){t("Start")}},P(c.a,null)),P("h2",{className:j.a.leaderboardTitle+" "+n.title},a.leaderboardTitle),P("ul",{className:j.a.leaderboard+" "+n.scoresWrapper},P("li",null,P("span",{className:j.a.nameColumnTitle},"Nickname"),P("span",{className:j.a.scoreColumnTitle},"Score")),p&&P(x.a,{color:"black"}),!p&&l&&l.map((function(e,t){return P("li",{key:e.nickname+t.toString()},P("span",{className:j.a.name+" "+n.name},e.nickname||"No Name"),P("span",{className:j.a.score+" "+n.score},e.highScore))}))))}var E=a("blT4"),G=a("ymb1"),D=a("x4LI"),N=a("xKJ2"),L=o.a.createElement;function B(e){var t=e.gameInfo,a=e.gameUIStyle,n=e.type,o=e.screen,p=e.changeScreen,f=e.useJoyStick,C=e.hideApple,x=e.renderOnGameOver,I=void 0===x?null:x;a||(a={});var j=Object(s.useState)(0),P=j[0],B=j[1],_=Object(s.useState)(null),U=_[0],M=_[1],A=Object(s.useState)(!1),R=A[0],W=A[1],F=Object(s.useState)(!1),H=F[0],J=F[1],z=Object(s.useState)(!1),Y=z[0],X=z[1],V=Object(u.a)({artistNameID:t.artistNameID,campaignID:t.campaignID,mailingLists:t.mailingLists}),q=V.spotifyUser,K=V.spotifyFunctions,Q=V.spotifyLoginButton,Z=Object(l.a)(),$=Z.appleUser,ee=Z.playApple,te=Object(D.a)({}).playSoundCloudTrack,ae=(Object(N.a)().streamSoundCloud,Object(s.useRef)(null));function ne(e){var t=document.querySelector("canvas");if(!(document.activeElement===t))return!1;var a=e.code;("ArrowLeft"===a||"ArrowRight"===a||"ArrowUp"===a||"ArrowDown"===a)&&e.preventDefault()}function re(e){Object(h.b)(t.campaignID,e)}function ie(){return se.apply(this,arguments)}function se(){return(se=Object(i.default)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,"track"!==t.backgroundMusic.spotify.type){e.next=9;break}return e.next=4,K.playMusic({uris:t.backgroundMusic.spotify.uris||[t.backgroundMusic.spotify.uri]});case 4:return a=e.sent,e.next=7,K.turnOnRepeat();case 7:e.next=12;break;case 9:return e.next=11,K.playMusic({context_uri:t.backgroundMusic.spotify.uri});case 11:a=e.sent;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(i.default)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(0),M(a),!q.connected){e.next=14;break}if(!q.premium){e.next=11;break}return e.next=6,ie();case 6:if("NO_ACTIVE_DEVICE"!==e.sent){e.next=9;break}return e.abrupt("return",p("NoSpotifyDevice"));case 9:e.next=12;break;case 11:return e.abrupt("return",p("NoPremium"));case 12:e.next=24;break;case 14:if(!$.connected){e.next=19;break}return e.next=17,ee(t.backgroundMusic.apple);case 17:e.next=24;break;case 19:if(!t.useSoundCloudOnly){e.next=23;break}te(),e.next=24;break;case 23:return e.abrupt("return",p("MusicConnectPrompt"));case 24:le(a),re("Start Game \u2013 With Streaming"),p(null),window.GlitchGame&&window.GlitchGame.startGame();case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){"Basketball"===n&&("Arcade"===e?window.GlitchGame.removeTimer():"Timed"===e&&window.GlitchGame.startTimer(t.timerLength||60,(function(e){he(e)})))}function ue(e){if(t.useMP3){var a=!t.MP3Info.loop||t.MP3Info.loop,n=t.MP3Info.volume?t.MP3Info.volume:.1;Y||(ae.current=new y.Howl({src:[t.MP3Info.source],loop:a})),ae.current.volume(n),ae.current.playing()||(ae.current.play(),X(ae.current))}re("Start Game \u2013 No Streaming"),le(e),p(null),window.GlitchGame&&window.GlitchGame.startGame()}function he(e){B(e),p("GameOver")}if(Object(s.useEffect)((function(){q.connected&&!t.useFollowButtonsOnly&&(q.premium?re("Connect Spotify Premium"):re("Connect Spotify Free"),Y&&Y.stop(),oe())}),[q.connected]),Object(s.useEffect)((function(){$.connected&&(re("Connect Apple Music"),Y&&Y.stop())}),[$.connected]),Object(s.useEffect)((function(){if(!o){var e=document.querySelector("canvas");e&&e.focus()}}),[o]),Object(s.useEffect)((function(){return document.addEventListener("keydown",ne),function(){document.removeEventListener("keydown",ne)}}),[]),Object(s.useEffect)((function(){window.GlitchGame=window.GlitchGame||{};var e=window.GlitchGame;e.handleGameOver=function(e){he(e)},e.handleBossDefeated=function(e){!function(e){p("bossDefeated"),J(!!e)}(e)},e.handleStreetFighterGameOver=function(e){!function(e){W("player"===e),setTimeout((function(){p("CustomGameOver")}),3e3)}(e)},e.handleNextLevel=function(){p("NextLevel")},e.handleGameLoaded=function(){p("Start")}}),[]),!o&&f){var pe=window.GlitchGame;return L(G.a,{callback:pe.JoyStickInput,aCallback:function(){pe.JoyStickButtonInput("A")},bCallback:function(){pe.JoyStickButtonInput("B")},xCallback:function(){pe.JoyStickButtonInput("X")},yCallback:function(){pe.JoyStickButtonInput("Y")}})}return o?L("section",{className:d.a.container+" "+a.container},(!t.useSoundCloudOnly||!t.useFollowButtonsOnly)&&L(S.a,{screen:o,gameUIStyle:a,gameInfo:t,handleSkipMusic:ue,appleMusic:Z,startGame:oe,mode:U,hideApple:C,spotifyLoginButton:Q}),"Start"===o&&t.useFollowButtonsOnly&&L(O.a,{gameUIStyle:a,gameInfo:t,handleSkipMusic:ue,appleMusic:Z,spotifyLoginButton:Q,spotifyFunctions:K,spotifyUser:q}),"Start"===o&&!t.useCharacterSelection&&!t.useFollowButtonsOnly&&!t.useLevels&&L(g.a,{gameUIStyle:a,gameInfo:t,type:n,startGame:oe}),"Start"===o&&t.useCharacterSelection&&L(b.a,{fireEvent:re,changeScreen:p,gameInfo:t,startGame:oe,gameUIStyle:a}),"Start"===o&&t.useLevels&&!t.useCharacterSelection&&L(v.a,{gameInfo:t,startGame:oe,gameUIStyle:a,fireEvent:re}),"ChooseLevel"===o&&L(v.a,{gameInfo:t,startGame:oe,gameUIStyle:a,fireEvent:re}),"NextLevel"===o&&L("div",{className:d.a.nextLevelContainer+" "+a.nextLevelContainer},L("p",null,"Get ready for the next level"),L("button",{className:m.a.button+" "+a.button,onClick:function(){p(null),window.GlitchGame.startNextLevel()}},"Continue")),"GameOver"===o&&L(k.a,{gameInfo:t,fireEvent:re,gameUIStyle:a,highScore:P,changeScreen:p,renderOnGameOver:I}),"bossDefeated"===o&&L(w.a,{fireEvent:re,levelFinal:H,gameUIStyle:a,changeScreen:p}),"CustomGameOver"===o&&t.customScreen(R,oe),"Leaderboard"===o&&L(T,{gameInfo:t,gameUIStyle:a,changeScreen:p}),"Trophies"===o&&L(E.a,{gameInfo:t,gameUIStyle:a}),"HowToPlay"===o&&L("div",{className:d.a.howToPlayContainer+" "+a.howToPlayContainer},L("div",{className:d.a.closeHowToPlay+" "+a.closeHowToPlay,onClick:function(){p("Start")}},L(c.a,null)),t.howToPlay.map((function(e){return L("div",{className:d.a.howToPlayItem},e.text)})))):null}},dlQy:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("q1tI"),r=a.n(n),i=a("p2fX"),s=a.n(i),o=a("4OvO"),c=a.n(o),l=r.a.createElement;function u(e){e.screen;var t=e.gameInfo,a=e.changeScreen,n=e.gameUIStyle;return n||(n={}),t||(t={}),l("div",{className:s.a.navigationContainer+" "+n.navigationContainer},l("button",{className:c.a.button+" "+n.button,onClick:function(){window.GlitchGame.resetGame&&window.GlitchGame.resetGame(),a("Start")}},l("span",null,"Play")),t.trophies&&!t.hideTrophies&&l("button",{className:"".concat(c.a.button," ").concat(n&&n.button),onClick:function(){return a("Trophies")}},l("span",null,"Trophies")),!1!==t.useLeaderboard&&l("button",{className:"".concat(c.a.button," ").concat(n&&n.button),onClick:function(){return a("Leaderboard")}},l("span",null,"Leaderboard")),l("button",{className:"".concat(c.a.button," ").concat(n&&n.button),onClick:function(){return a("HowToPlay")}},l("span",null,"How To Play")))}},jr3v:function(e,t,a){"use strict";var n,r,i,s,o,c,l=a("TqRt"),u=l(a("rePB")),h=l(a("1O+K")),p=l(a("5S1k")),d=l(a("UgJc")),f=l(a("xyl9")),m=l(a("KeVN")),y=l(a("OE4k")),g=l(a("DLSN"));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S,O,k,w,C,x,I,j,P,T={type:h.default.CANVAS,width:600,height:320,pixelArt:!0,parent:"gameContainer",physics:{default:"arcade",arcade:{gravity:{y:2400},debug:!1}},scene:{preload:function(){var e=this;this.load.on("complete",(function(){document.getElementById("loadingScreen").style.display="none"})),this.load.setBaseURL(n),r||(r=[""]);r.forEach((function(t,a){e.load.image("ground-"+a,"levels/"+a+"/ground.png"),e.load.image("background-far-"+a,"levels/"+a+"/background-far.png"),e.load.image("background-mid-"+a,"levels/"+a+"/background-mid.png"),e.load.image("background-near-"+a,"levels/"+a+"/background-near.png")})),i||(i=[""]);i.forEach((function(t,a){e.load.spritesheet("character-jump-"+a,"characters/"+a+"/jump.png",j.playerSpriteSize),e.load.spritesheet("character-idle-"+a,"characters/"+a+"/idle.png",j.playerSpriteSize),e.load.spritesheet("character-run-"+a,"characters/"+a+"/run.png",j.playerSpriteSize),e.load.spritesheet("character-die-"+a,"characters/"+a+"/die.png",j.playerSpriteSize)})),this.load.image("coin","coin.png"),this.load.image("heart","heart.png"),j.groundObstacle&&this.load.spritesheet("groundObstacle","enemy.png",j.groundObstacleSpriteSize);j.flyingObstacle&&this.load.spritesheet("flyingObstacle","enemy2.png",j.flyingObstacleSpriteSize)},create:function(){S=new p.default({phaser:this,offsetBottom:10,bgSpeed:c}),x=new g.default({phaser:this,playerMaxLives:3,trophies:s,gameOverCallback:function(){I.startAt=0,I.timeScale=1,I.paused=!0,G=!1,D=!0,window.GlitchGame.handleGameOver(x.score)},campaignID:P}),O=new d.default({phaser:this,startPos:S.playerStartPos,maxJump:1,displayWidth:S.groundBlockWidth,longJumpTime:.15,characterQuantity:i.length,afterDeathCallback:function(){E=3,I.paused=!0,I.timeScale=1,I.startAt=0,I.paused=!1,j.groundObstacle&&w.reset(),j.flyingObstacle&&C.reset(),k.reset(),x.loseLife(),D||(k.spawnFirstCoin(),G=!0)}}),j.groundObstacle&&(w=new m.default({phaser:this,gameConfig:j,groundY:S.groundY,displayWidth:S.groundBlockWidth}));j.flyingObstacle&&(C=new y.default({phaser:this,gameConfig:j,groundY:S.groundY,displayWidth:S.groundBlockWidth}));k=new f.default({phaser:this,groundY:S.groundY,playerHeight:O.Player.displayHeight,spawnGroundObstacle:function(e){j.groundObstacle&&w.spawnEnemy(e)},spawnFlyingObstacle:function(e,t){j.flyingObstacle&&C.spawnEnemy(e,t)}}),function(e){e.physics.add.collider(O.Player,S.ground),e.physics.add.overlap(O.Player,k.Coins,(function(e,t){x.increaseScore(10),k.handleOverlap(t)})),j.groundObstacle&&e.physics.add.overlap(O.Player,w.Enemies,(function(){O.dead||D||(G=!1,O.kill())}));j.flyingObstacle&&e.physics.add.overlap(O.Player,C.Enemies,(function(){O.dead||D||(G=!1,O.kill())}))}(this),I=this.time.addEvent({delay:2e3,callback:function(){I.timeScale=1/E,E+=.4},paused:!0,loop:!0})},update:function(){G&&(S.update(E),j.groundObstacle&&w.update(E),j.flyingObstacle&&C.update(E),k.update(E,C.Enemies.children.entries||[]));O.update(G),o&&(o.filter((function(e){return e.score<=x.sessionPoints+x.score})).forEach((function(e){return(0,e.callback)()})),o=o.filter((function(e){return e.score>x.sessionPoints+x.score})))}}},E=3,G=!1,D=!1;window.GlitchGame=v(v({},window.GlitchGame||{}),{},{chooseLevel:function(e){S.chooseLevel(e)},chooseCharacter:function(e){O.changeCharacter(e)},startGame:function(){E=3,I.paused=!1,G=!0,D=!1,j.groundObstacle&&w.reset(),j.flyingObstacle&&C.reset(),k.reset(),x.reset(),k.spawnFirstCoin()}});e.exports=function(e){var t=e.gameInfo;return s=t.trophies,o=t.unlockables,n=t.assetsFolder,r=t.levels,i=t.characters,c=t.bgSpeed,j=v({flyingObstacle:!0,groundObstacle:!0,playerSpriteSize:{frameWidth:15,frameHeight:20},groundObstacleSpriteSize:{frameWidth:t.groundObstacleSpriteSize?t.groundObstacleSpriteSize.frameWidth:17,frameHeight:t.groundObstacleSpriteSize?t.groundObstacleSpriteSize.frameHeight:25},flyingObstacleSpriteSize:{frameWidth:t.flyingObstacleSpriteSize?t.flyingObstacleSpriteSize.frameWidth:17,frameHeight:t.flyingObstacleSpriteSize?t.flyingObstacleSpriteSize.frameHeight:25}},t),P=t.campaignID,new h.default.Game(T)}},"m+qX":function(e,t,a){e.exports={container:"StreamPoints_container__1buBJ"}},p2fX:function(e,t,a){e.exports={navigationContainer:"NavigationButtons_navigationContainer__3KO5f"}},qS1Z:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("q1tI"),r=a.n(n),i=a("bp8q"),s=a("dlQy"),o=a("aO+K"),c=a("y5pb"),l=a.n(c),u=a("8Hc4"),h=r.a.createElement;function p(e){var t=e.gameInfo,r=e.gameUIStyle,c=e.children,p=void 0===c?h("div",null):c;r||(r={});var d=Object(n.useState)("Start"),f=d[0],m=d[1];Object(n.useEffect)((function(){a("jr3v")({gameInfo:t})}),[]);var y=Object(u.a)().isInstagramBrowser;return h("div",{className:l.a.container},h("div",{className:l.a.aspectRatio},h("div",{id:"gameContainer",className:l.a.canvasHolder+" "+r.gameContainer},h("div",{className:l.a.pleaseRotateDevice+" "+r.pleaseRotateDevice},y&&h("p",{style:{maxWidth:"500px",margin:"30px auto",fontSize:"0.9rem",lineHeight:"1.2rem"}},"Looks like you're using an unsupported browser. Please open this link in Chrome, Safari, or Firefox for the best experience."),!y&&h("p",null,"Please rotate your device to play the game")),h(i.a,{gameUIStyle:r,gameInfo:t,screen:f,changeScreen:m}),h("div",{id:"loadingScreen",className:l.a.loading+" "+r.loading}))),t.useStreamPoints&&h(o.a,{gameInfo:t,gameUIStyle:r}),p,h(s.a,{gameInfo:t,gameUIStyle:r,screen:f,changeScreen:m}))}},s6iT:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("1OyB"),r=a("vuIU"),i=function(){function e(t){var a=t.phaser,r=t.groundY,i=t.displayWidth,s=t.spriteName,o=t.collisionBox;Object(n.a)(this,e),this.phaser=a,this.groundY=r,this.Enemies=this.phaser.physics.add.group({createCallback:function(e){e.body.setAllowGravity(!1),e.anims.play(s+"-run",!0),e.setScale(i/e.displayWidth),e.setOrigin(.5,1),e.body.setSize(o.width||e.body.width,o.height||e.body.height,!1),e.body.setOffset(o.left||0,o.top||0)}}),this.phaser.anims.create({key:s+"-run",frames:this.phaser.anims.generateFrameNumbers(s),frameRate:8,repeat:-1}),this.spriteName=s}return Object(r.a)(e,[{key:"spawnEnemy",value:function(e){this.Enemies.create(e,this.groundY,this.spriteName)}},{key:"reset",value:function(){this.Enemies.clear(!0,!0)}},{key:"update",value:function(e){var t=this;this.Enemies.incX(2*-e),this.Enemies.children.entries.filter((function(e){return e.x+e.displayWidth/2<0})).forEach((function(e){return t.Enemies.remove(e,!0,!0)}))}}]),e}()},xyl9:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var n=a("1OyB"),r=a("vuIU"),i=function(){function e(t){var a=t.phaser,r=t.groundY,i=t.spawnGroundObstacle,s=t.spawnFlyingObstacle,o=t.playerHeight;Object(n.a)(this,e),this.phaser=a,this.step=35,this.groundY=r-10,this.spawnGroundObstacle=i,this.spawnFlyingObstacle=s,this.startX=150,this.playerHeight=o,this.Coins=this.phaser.physics.add.group({createCallback:function(e){e.body.setAllowGravity(!1),e.setOrigin(.5,1)}}),this.gap=3*this.step}return Object(r.a)(e,[{key:"handleOverlap",value:function(e){this.Coins.remove(e,!0,!0)}},{key:"reset",value:function(){this.Coins.clear(!0,!0)}},{key:"spawnFirstCoin",value:function(){this.Coins.create(this.startX+34+this.step,this.groundY,"coin")}},{key:"update",value:function(e,t){var a=this;this.Coins.incX(2*-e),this.Coins.children.entries.filter((function(e){return e.x+e.displayWidth/2<0})).forEach((function(e){return a.Coins.remove(e,!0,!0)}));var n=this.Coins.children.entries.concat(t).sort((function(e,t){return t.x-e.x}))[0];if(n.x+n.displayWidth/2<this.phaser.cameras.main.width){var r=this.gap*(4*Math.random()+2);if(Math.random()<.5){for(var i=5+~~(7*Math.random()),s=Math.PI/i,o=0;o<=i;o++)this.Coins.create(n.x+(o+1)*(n.displayWidth+this.step)+r,this.groundY-100*Math.sin(o*s),"coin");this.spawnGroundObstacle(n.x+(1+i/2)*(n.displayWidth+this.step)+r)}else{for(var c=Phaser.Math.RND.pick([0,0,1,1,2]),l=0;l<3&&l!=c;l++)this.Coins.create(n.x+n.displayWidth+this.step+r,this.groundY-l*(n.displayHeight+10),"coin");e>=5&&this.spawnFlyingObstacle(n.x+n.displayWidth+this.step+r,this.groundY-(1!=c?c*(n.displayHeight+10):this.playerHeight))}}}}]),e}()},y5pb:function(e,t,a){e.exports={container:"DefaultStyle_container__2Ipmh",aspectRatio:"DefaultStyle_aspectRatio__1XwOo",canvasHolder:"DefaultStyle_canvasHolder__3nAwd",pleaseRotateDevice:"DefaultStyle_pleaseRotateDevice__3j8Yk",loading:"DefaultStyle_loading__3bzqM"}}}]);